<?xml version="1.0" encoding="utf-8"?>
<data>
  <tilesheet id="dem.png" width="16" height="20" />
  <tile id="dem" sheet="dem.png" />
  <animation id="dem.idle" tile="dem" x="1" count="1" />
  <animation id="dem.talk" tile="dem" x="0" count="1" />
  <animation id="dem.walk" tile="dem" x="0" count="3" />
  <animation id="dem.attack" tile="dem" x="0" count="1" />

  <tilesheet id="snek.png" width="16" height="16" />
  <tile id="snek" sheet="snek.png" />
  <animation id="snek.idle" tile="snek" x="8" count="1" />
  <animation id="snek.talk" tile="snek" x="0" count="9" />
  <animation id="snek.walk" tile="snek" x="9" count="9" />

  <quest id="init_echoes" giver="dem" exp="1000">

  </quest>

  <quest id="check_dem">
    <script name="quests.check_dem_req" id="getFlag('dem_spoken')"/>
  </quest>

  <npc id="dem" tile="dem" action="talk" talk_sfx="talk1">
    <operate>
      <section if="getFlag('final_boss_defeat') && !player.hasQuest('init_echoes')">
        <dialogue section="dem" id="init1" />
        <dialogue section="dem" id="init2" />
        <dialogue section="dem" id="init3" />
        <quest id="init_echoes" />
        <action>
          setFlag("dem_spoken", true)
        </action>
        <complete quest="check_dem" />
      </section>
    </operate>

    <idle class="hunt" maxWeight="50">
      <attack type="projectile" damage="20" range="7" animation="attack">
        <projectile tile="arrow" speed="3" offsetY="4" fire_sfx="plasma_gun"
          hit_sfx="bandit_ranged_hit" knockback="5" />
      </attack>
    </idle>
  </npc>

  <npc id="snek" tile="snek" action="talk" talk_sfx="talk1">
    <operate>
      <section if="getFlag('final_boss_defeat')&& !player.hasQuest('check_dem')">
        <dialogue section="snek" id="start1"/>
        <dialogue section="snek" id="start2"/>
        <quest id="check_dem" />
        <structure id="cdship" x="1" y="-0.6" area="colony.mainland"/>
        <object id="dem" area="colony.mainland"/>
      </section>
    </operate>
    <idle class="wander" toX="115" />
  </npc>
</data>